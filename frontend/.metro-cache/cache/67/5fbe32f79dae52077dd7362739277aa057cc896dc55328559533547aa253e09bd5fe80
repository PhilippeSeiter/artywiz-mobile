{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":146},"end":{"line":5,"column":99,"index":245}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-router","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":246},"end":{"line":6,"column":42,"index":288}}],"key":"/+ErnBisjrT6aDU+GRp5Qz/lYoY=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/providers/VideoDirectionProvider.tsx\";\n  /**\n   * VideoDirectionContext - Gère la direction de lecture de la vidéo de fond\n   * Alterne entre avant et arrière à chaque changement d'écran\n   */\n  // Écrans où la vidéo doit être active\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  exports.useVideoDirection = useVideoDirection;\n  exports.VideoDirectionProvider = VideoDirectionProvider;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _expoRouter = require(_dependencyMap[1], \"expo-router\");\n  var _reactJsxDevRuntime = require(_dependencyMap[2], \"react/jsx-dev-runtime\");\n  const AUTH_SCREENS = ['/', '/login', '/signup', '/sector-selection', '/profile-selection', '/theme-selection', '/onboarding-themes'];\n  const VideoDirectionContext = /*#__PURE__*/(0, _react.createContext)({\n    isForward: true,\n    videoRef: {\n      current: null\n    },\n    registerVideo: () => {}\n  });\n  function useVideoDirection() {\n    return (0, _react.useContext)(VideoDirectionContext);\n  }\n  function VideoDirectionProvider({\n    children\n  }) {\n    const pathname = (0, _expoRouter.usePathname)();\n    const [isForward, setIsForward] = (0, _react.useState)(true);\n    const videoRef = (0, _react.useRef)(null);\n    const previousPathname = (0, _react.useRef)(pathname);\n    const animationFrameRef = (0, _react.useRef)(null);\n    const isAnimatingRef = (0, _react.useRef)(false);\n    const registerVideo = (0, _react.useCallback)(video => {\n      videoRef.current = video;\n    }, []);\n\n    // Fonction pour animer la vidéo en arrière (manipulation du currentTime)\n    const animateBackward = (0, _react.useCallback)(() => {\n      if (!videoRef.current || isAnimatingRef.current) return;\n      const video = videoRef.current;\n      isAnimatingRef.current = true;\n      video.pause();\n      const animate = () => {\n        if (!videoRef.current) {\n          isAnimatingRef.current = false;\n          return;\n        }\n\n        // Reculer de ~0.033s par frame (équivalent ~30fps en arrière)\n        video.currentTime -= 0.033;\n\n        // Si on arrive au début, revenir à la fin pour boucler\n        if (video.currentTime <= 0) {\n          video.currentTime = video.duration - 0.1;\n        }\n        animationFrameRef.current = requestAnimationFrame(animate);\n      };\n      animate();\n    }, []);\n\n    // Fonction pour animer la vidéo en avant (lecture normale)\n    const animateForward = (0, _react.useCallback)(() => {\n      if (!videoRef.current) return;\n      const video = videoRef.current;\n\n      // Arrêter l'animation manuelle en arrière\n      if (animationFrameRef.current) {\n        cancelAnimationFrame(animationFrameRef.current);\n        animationFrameRef.current = null;\n      }\n      isAnimatingRef.current = false;\n\n      // Reprendre la lecture normale\n      video.play().catch(console.warn);\n    }, []);\n\n    // Détecter les changements d'écran et alterner la direction\n    (0, _react.useEffect)(() => {\n      // Vérifier si on est sur un écran d'auth\n      const isCurrentAuthScreen = AUTH_SCREENS.some(screen => pathname === screen || pathname.startsWith(screen + '/'));\n      const wasPreviousAuthScreen = AUTH_SCREENS.some(screen => previousPathname.current === screen || previousPathname.current.startsWith(screen + '/'));\n\n      // Si on navigue entre deux écrans d'auth, alterner la direction\n      if (isCurrentAuthScreen && wasPreviousAuthScreen && pathname !== previousPathname.current) {\n        setIsForward(prev => {\n          const newDirection = !prev;\n\n          // Appliquer le changement de direction à la vidéo\n          setTimeout(() => {\n            if (newDirection) {\n              animateForward();\n            } else {\n              animateBackward();\n            }\n          }, 100);\n          return newDirection;\n        });\n      }\n\n      // Si on quitte les écrans d'auth, remettre en lecture normale\n      if (!isCurrentAuthScreen && wasPreviousAuthScreen) {\n        animateForward();\n        setIsForward(true);\n      }\n\n      // Si on arrive sur un écran d'auth depuis ailleurs, démarrer en avant\n      if (isCurrentAuthScreen && !wasPreviousAuthScreen) {\n        animateForward();\n        setIsForward(true);\n      }\n      previousPathname.current = pathname;\n    }, [pathname, animateForward, animateBackward]);\n\n    // Cleanup\n    (0, _react.useEffect)(() => {\n      return () => {\n        if (animationFrameRef.current) {\n          cancelAnimationFrame(animationFrameRef.current);\n        }\n      };\n    }, []);\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(VideoDirectionContext.Provider, {\n      value: {\n        isForward,\n        videoRef,\n        registerVideo\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 5\n    }, this);\n  }\n  var _default = VideoDirectionProvider;\n});","lineCount":147,"map":[[5,2,1,0],[6,0,2,0],[7,0,3,0],[8,0,4,0],[9,2,8,0],[10,2,8,0,"Object"],[10,8,8,0],[10,9,8,0,"defineProperty"],[10,23,8,0],[10,24,8,0,"exports"],[10,31,8,0],[11,4,8,0,"value"],[11,9,8,0],[12,2,8,0],[13,2,143,0,"Object"],[13,8,143,0],[13,9,143,0,"defineProperty"],[13,23,143,0],[13,24,143,0,"exports"],[13,31,143,0],[14,4,143,0,"enumerable"],[14,14,143,0],[15,4,143,0,"get"],[15,7,143,0],[15,18,143,0,"get"],[15,19,143,0],[16,6,143,0],[16,13,143,0,"_default"],[16,21,143,0],[17,4,143,0],[18,2,143,0],[19,2,23,0,"exports"],[19,9,23,0],[19,10,23,0,"useVideoDirection"],[19,27,23,0],[19,30,23,0,"useVideoDirection"],[19,47,23,0],[20,2,31,0,"exports"],[20,9,31,0],[20,10,31,0,"VideoDirectionProvider"],[20,32,31,0],[20,35,31,0,"VideoDirectionProvider"],[20,57,31,0],[21,2,5,0],[21,6,5,0,"_react"],[21,12,5,0],[21,15,5,0,"require"],[21,22,5,0],[21,23,5,0,"_dependencyMap"],[21,37,5,0],[22,2,6,0],[22,6,6,0,"_expoRouter"],[22,17,6,0],[22,20,6,0,"require"],[22,27,6,0],[22,28,6,0,"_dependencyMap"],[22,42,6,0],[23,2,6,42],[23,6,6,42,"_reactJsxDevRuntime"],[23,25,6,42],[23,28,6,42,"require"],[23,35,6,42],[23,36,6,42,"_dependencyMap"],[23,50,6,42],[24,2,9,0],[24,8,9,6,"AUTH_SCREENS"],[24,20,9,18],[24,23,9,21],[24,24,9,22],[24,27,9,25],[24,29,9,27],[24,37,9,35],[24,39,9,37],[24,48,9,46],[24,50,9,48],[24,69,9,67],[24,71,9,69],[24,91,9,89],[24,93,9,91],[24,111,9,109],[24,113,9,111],[24,133,9,131],[24,134,9,132],[25,2,17,0],[25,8,17,6,"VideoDirectionContext"],[25,29,17,27],[25,45,17,30],[25,49,17,30,"createContext"],[25,55,17,43],[25,56,17,43,"createContext"],[25,69,17,43],[25,71,17,71],[26,4,18,2,"isForward"],[26,13,18,11],[26,15,18,13],[26,19,18,17],[27,4,19,2,"videoRef"],[27,12,19,10],[27,14,19,12],[28,6,19,14,"current"],[28,13,19,21],[28,15,19,23],[29,4,19,28],[29,5,19,29],[30,4,20,2,"registerVideo"],[30,17,20,15],[30,19,20,17,"registerVideo"],[30,20,20,17],[30,25,20,23],[30,26,20,24],[31,2,21,0],[31,3,21,1],[31,4,21,2],[32,2,23,7],[32,11,23,16,"useVideoDirection"],[32,28,23,33,"useVideoDirection"],[32,29,23,33],[32,31,23,36],[33,4,24,2],[33,11,24,9],[33,15,24,9,"useContext"],[33,21,24,19],[33,22,24,19,"useContext"],[33,32,24,19],[33,34,24,20,"VideoDirectionContext"],[33,55,24,41],[33,56,24,42],[34,2,25,0],[35,2,31,7],[35,11,31,16,"VideoDirectionProvider"],[35,33,31,38,"VideoDirectionProvider"],[35,34,31,39],[36,4,31,41,"children"],[37,2,31,79],[37,3,31,80],[37,5,31,82],[38,4,32,2],[38,10,32,8,"pathname"],[38,18,32,16],[38,21,32,19],[38,25,32,19,"usePathname"],[38,36,32,30],[38,37,32,30,"usePathname"],[38,48,32,30],[38,50,32,31],[38,51,32,32],[39,4,33,2],[39,10,33,8],[39,11,33,9,"isForward"],[39,20,33,18],[39,22,33,20,"setIsForward"],[39,34,33,32],[39,35,33,33],[39,38,33,36],[39,42,33,36,"useState"],[39,48,33,44],[39,49,33,44,"useState"],[39,57,33,44],[39,59,33,45],[39,63,33,49],[39,64,33,50],[40,4,34,2],[40,10,34,8,"videoRef"],[40,18,34,16],[40,21,34,19],[40,25,34,19,"useRef"],[40,31,34,25],[40,32,34,25,"useRef"],[40,38,34,25],[40,40,34,51],[40,44,34,55],[40,45,34,56],[41,4,35,2],[41,10,35,8,"previousPathname"],[41,26,35,24],[41,29,35,27],[41,33,35,27,"useRef"],[41,39,35,33],[41,40,35,33,"useRef"],[41,46,35,33],[41,48,35,42,"pathname"],[41,56,35,50],[41,57,35,51],[42,4,36,2],[42,10,36,8,"animationFrameRef"],[42,27,36,25],[42,30,36,28],[42,34,36,28,"useRef"],[42,40,36,34],[42,41,36,34,"useRef"],[42,47,36,34],[42,49,36,50],[42,53,36,54],[42,54,36,55],[43,4,37,2],[43,10,37,8,"isAnimatingRef"],[43,24,37,22],[43,27,37,25],[43,31,37,25,"useRef"],[43,37,37,31],[43,38,37,31,"useRef"],[43,44,37,31],[43,46,37,32],[43,51,37,37],[43,52,37,38],[44,4,39,2],[44,10,39,8,"registerVideo"],[44,23,39,21],[44,26,39,24],[44,30,39,24,"useCallback"],[44,36,39,35],[44,37,39,35,"useCallback"],[44,48,39,35],[44,50,39,37,"video"],[44,55,39,67],[44,59,39,72],[45,6,40,4,"videoRef"],[45,14,40,12],[45,15,40,13,"current"],[45,22,40,20],[45,25,40,23,"video"],[45,30,40,28],[46,4,41,2],[46,5,41,3],[46,7,41,5],[46,9,41,7],[46,10,41,8],[48,4,43,2],[49,4,44,2],[49,10,44,8,"animateBackward"],[49,25,44,23],[49,28,44,26],[49,32,44,26,"useCallback"],[49,38,44,37],[49,39,44,37,"useCallback"],[49,50,44,37],[49,52,44,38],[49,58,44,44],[50,6,45,4],[50,10,45,8],[50,11,45,9,"videoRef"],[50,19,45,17],[50,20,45,18,"current"],[50,27,45,25],[50,31,45,29,"isAnimatingRef"],[50,45,45,43],[50,46,45,44,"current"],[50,53,45,51],[50,55,45,53],[51,6,47,4],[51,12,47,10,"video"],[51,17,47,15],[51,20,47,18,"videoRef"],[51,28,47,26],[51,29,47,27,"current"],[51,36,47,34],[52,6,48,4,"isAnimatingRef"],[52,20,48,18],[52,21,48,19,"current"],[52,28,48,26],[52,31,48,29],[52,35,48,33],[53,6,49,4,"video"],[53,11,49,9],[53,12,49,10,"pause"],[53,17,49,15],[53,18,49,16],[53,19,49,17],[54,6,51,4],[54,12,51,10,"animate"],[54,19,51,17],[54,22,51,20,"animate"],[54,23,51,20],[54,28,51,26],[55,8,52,6],[55,12,52,10],[55,13,52,11,"videoRef"],[55,21,52,19],[55,22,52,20,"current"],[55,29,52,27],[55,31,52,29],[56,10,53,8,"isAnimatingRef"],[56,24,53,22],[56,25,53,23,"current"],[56,32,53,30],[56,35,53,33],[56,40,53,38],[57,10,54,8],[58,8,55,6],[60,8,57,6],[61,8,58,6,"video"],[61,13,58,11],[61,14,58,12,"currentTime"],[61,25,58,23],[61,29,58,27],[61,34,58,32],[63,8,60,6],[64,8,61,6],[64,12,61,10,"video"],[64,17,61,15],[64,18,61,16,"currentTime"],[64,29,61,27],[64,33,61,31],[64,34,61,32],[64,36,61,34],[65,10,62,8,"video"],[65,15,62,13],[65,16,62,14,"currentTime"],[65,27,62,25],[65,30,62,28,"video"],[65,35,62,33],[65,36,62,34,"duration"],[65,44,62,42],[65,47,62,45],[65,50,62,48],[66,8,63,6],[67,8,65,6,"animationFrameRef"],[67,25,65,23],[67,26,65,24,"current"],[67,33,65,31],[67,36,65,34,"requestAnimationFrame"],[67,57,65,55],[67,58,65,56,"animate"],[67,65,65,63],[67,66,65,64],[68,6,66,4],[68,7,66,5],[69,6,68,4,"animate"],[69,13,68,11],[69,14,68,12],[69,15,68,13],[70,4,69,2],[70,5,69,3],[70,7,69,5],[70,9,69,7],[70,10,69,8],[72,4,71,2],[73,4,72,2],[73,10,72,8,"animateForward"],[73,24,72,22],[73,27,72,25],[73,31,72,25,"useCallback"],[73,37,72,36],[73,38,72,36,"useCallback"],[73,49,72,36],[73,51,72,37],[73,57,72,43],[74,6,73,4],[74,10,73,8],[74,11,73,9,"videoRef"],[74,19,73,17],[74,20,73,18,"current"],[74,27,73,25],[74,29,73,27],[75,6,75,4],[75,12,75,10,"video"],[75,17,75,15],[75,20,75,18,"videoRef"],[75,28,75,26],[75,29,75,27,"current"],[75,36,75,34],[77,6,77,4],[78,6,78,4],[78,10,78,8,"animationFrameRef"],[78,27,78,25],[78,28,78,26,"current"],[78,35,78,33],[78,37,78,35],[79,8,79,6,"cancelAnimationFrame"],[79,28,79,26],[79,29,79,27,"animationFrameRef"],[79,46,79,44],[79,47,79,45,"current"],[79,54,79,52],[79,55,79,53],[80,8,80,6,"animationFrameRef"],[80,25,80,23],[80,26,80,24,"current"],[80,33,80,31],[80,36,80,34],[80,40,80,38],[81,6,81,4],[82,6,82,4,"isAnimatingRef"],[82,20,82,18],[82,21,82,19,"current"],[82,28,82,26],[82,31,82,29],[82,36,82,34],[84,6,84,4],[85,6,85,4,"video"],[85,11,85,9],[85,12,85,10,"play"],[85,16,85,14],[85,17,85,15],[85,18,85,16],[85,19,85,17,"catch"],[85,24,85,22],[85,25,85,23,"console"],[85,32,85,30],[85,33,85,31,"warn"],[85,37,85,35],[85,38,85,36],[86,4,86,2],[86,5,86,3],[86,7,86,5],[86,9,86,7],[86,10,86,8],[88,4,88,2],[89,4,89,2],[89,8,89,2,"useEffect"],[89,14,89,11],[89,15,89,11,"useEffect"],[89,24,89,11],[89,26,89,12],[89,32,89,18],[90,6,90,4],[91,6,91,4],[91,12,91,10,"isCurrentAuthScreen"],[91,31,91,29],[91,34,91,32,"AUTH_SCREENS"],[91,46,91,44],[91,47,91,45,"some"],[91,51,91,49],[91,52,91,50,"screen"],[91,58,91,56],[91,62,91,60,"pathname"],[91,70,91,68],[91,75,91,73,"screen"],[91,81,91,79],[91,85,91,83,"pathname"],[91,93,91,91],[91,94,91,92,"startsWith"],[91,104,91,102],[91,105,91,103,"screen"],[91,111,91,109],[91,114,91,112],[91,117,91,115],[91,118,91,116],[91,119,91,117],[92,6,92,4],[92,12,92,10,"wasPreviousAuthScreen"],[92,33,92,31],[92,36,92,34,"AUTH_SCREENS"],[92,48,92,46],[92,49,92,47,"some"],[92,53,92,51],[92,54,92,52,"screen"],[92,60,92,58],[92,64,92,62,"previousPathname"],[92,80,92,78],[92,81,92,79,"current"],[92,88,92,86],[92,93,92,91,"screen"],[92,99,92,97],[92,103,92,101,"previousPathname"],[92,119,92,117],[92,120,92,118,"current"],[92,127,92,125],[92,128,92,126,"startsWith"],[92,138,92,136],[92,139,92,137,"screen"],[92,145,92,143],[92,148,92,146],[92,151,92,149],[92,152,92,150],[92,153,92,151],[94,6,94,4],[95,6,95,4],[95,10,95,8,"isCurrentAuthScreen"],[95,29,95,27],[95,33,95,31,"wasPreviousAuthScreen"],[95,54,95,52],[95,58,95,56,"pathname"],[95,66,95,64],[95,71,95,69,"previousPathname"],[95,87,95,85],[95,88,95,86,"current"],[95,95,95,93],[95,97,95,95],[96,8,96,6,"setIsForward"],[96,20,96,18],[96,21,96,19,"prev"],[96,25,96,23],[96,29,96,27],[97,10,97,8],[97,16,97,14,"newDirection"],[97,28,97,26],[97,31,97,29],[97,32,97,30,"prev"],[97,36,97,34],[99,10,99,8],[100,10,100,8,"setTimeout"],[100,20,100,18],[100,21,100,19],[100,27,100,25],[101,12,101,10],[101,16,101,14,"newDirection"],[101,28,101,26],[101,30,101,28],[102,14,102,12,"animateForward"],[102,28,102,26],[102,29,102,27],[102,30,102,28],[103,12,103,10],[103,13,103,11],[103,19,103,17],[104,14,104,12,"animateBackward"],[104,29,104,27],[104,30,104,28],[104,31,104,29],[105,12,105,10],[106,10,106,8],[106,11,106,9],[106,13,106,11],[106,16,106,14],[106,17,106,15],[107,10,108,8],[107,17,108,15,"newDirection"],[107,29,108,27],[108,8,109,6],[108,9,109,7],[108,10,109,8],[109,6,110,4],[111,6,112,4],[112,6,113,4],[112,10,113,8],[112,11,113,9,"isCurrentAuthScreen"],[112,30,113,28],[112,34,113,32,"wasPreviousAuthScreen"],[112,55,113,53],[112,57,113,55],[113,8,114,6,"animateForward"],[113,22,114,20],[113,23,114,21],[113,24,114,22],[114,8,115,6,"setIsForward"],[114,20,115,18],[114,21,115,19],[114,25,115,23],[114,26,115,24],[115,6,116,4],[117,6,118,4],[118,6,119,4],[118,10,119,8,"isCurrentAuthScreen"],[118,29,119,27],[118,33,119,31],[118,34,119,32,"wasPreviousAuthScreen"],[118,55,119,53],[118,57,119,55],[119,8,120,6,"animateForward"],[119,22,120,20],[119,23,120,21],[119,24,120,22],[120,8,121,6,"setIsForward"],[120,20,121,18],[120,21,121,19],[120,25,121,23],[120,26,121,24],[121,6,122,4],[122,6,124,4,"previousPathname"],[122,22,124,20],[122,23,124,21,"current"],[122,30,124,28],[122,33,124,31,"pathname"],[122,41,124,39],[123,4,125,2],[123,5,125,3],[123,7,125,5],[123,8,125,6,"pathname"],[123,16,125,14],[123,18,125,16,"animateForward"],[123,32,125,30],[123,34,125,32,"animateBackward"],[123,49,125,47],[123,50,125,48],[123,51,125,49],[125,4,127,2],[126,4,128,2],[126,8,128,2,"useEffect"],[126,14,128,11],[126,15,128,11,"useEffect"],[126,24,128,11],[126,26,128,12],[126,32,128,18],[127,6,129,4],[127,13,129,11],[127,19,129,17],[128,8,130,6],[128,12,130,10,"animationFrameRef"],[128,29,130,27],[128,30,130,28,"current"],[128,37,130,35],[128,39,130,37],[129,10,131,8,"cancelAnimationFrame"],[129,30,131,28],[129,31,131,29,"animationFrameRef"],[129,48,131,46],[129,49,131,47,"current"],[129,56,131,54],[129,57,131,55],[130,8,132,6],[131,6,133,4],[131,7,133,5],[132,4,134,2],[132,5,134,3],[132,7,134,5],[132,9,134,7],[132,10,134,8],[133,4,136,2],[133,24,137,4],[133,28,137,4,"_reactJsxDevRuntime"],[133,47,137,4],[133,48,137,4,"jsxDEV"],[133,54,137,4],[133,56,137,5,"VideoDirectionContext"],[133,77,137,26],[133,78,137,27,"Provider"],[133,86,137,35],[134,6,137,36,"value"],[134,11,137,41],[134,13,137,43],[135,8,137,45,"isForward"],[135,17,137,54],[136,8,137,56,"videoRef"],[136,16,137,64],[137,8,137,66,"registerVideo"],[138,6,137,80],[138,7,137,82],[139,6,137,82,"children"],[139,14,137,82],[139,16,138,7,"children"],[140,4,138,15],[141,6,138,15,"fileName"],[141,14,138,15],[141,16,138,15,"_jsxFileName"],[141,28,138,15],[142,6,138,15,"lineNumber"],[142,16,138,15],[143,6,138,15,"columnNumber"],[143,18,138,15],[144,4,138,15],[144,11,139,36],[144,12,139,37],[145,2,141,0],[146,2,143,0],[146,6,143,0,"_default"],[146,14,143,0],[146,17,143,15,"VideoDirectionProvider"],[146,39,143,37],[147,0,143,38],[147,3]],"functionMap":{"names":["<global>","createContext$argument_0.registerVideo","useVideoDirection","VideoDirectionProvider","registerVideo","animateBackward","animate","animateForward","useEffect$argument_0","AUTH_SCREENS.some$argument_0","setIsForward$argument_0","setTimeout$argument_0","<anonymous>"],"mappings":"AAA;iBCmB,QD;OEG;CFE;OGM;oCCQ;GDE;sCEG;oBCO;KDe;GFG;qCIG;GJc;YKG;kDCE,kED;oDCC,kGD;mBEI;mBCI;SDM;OFG;GLgB;YKG;WIC;KJI;GLC;CHO"},"hasCjsExports":false},"type":"js/module"}]}