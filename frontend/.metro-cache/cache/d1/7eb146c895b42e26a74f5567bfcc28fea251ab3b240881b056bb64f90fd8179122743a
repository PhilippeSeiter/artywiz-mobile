{"dependencies":[{"name":"@babel/runtime/helpers/toConsumableArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"kiCFfIx1MWoD4noR0gEoyrFAUKE=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":15},"end":{"line":3,"column":68,"index":83}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"./Image","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":85},"end":{"line":5,"column":32,"index":117}}],"key":"I2Mr3f3chxmh02krEQCRqYY9hRA=","exportNames":["*"],"imports":1}},{"name":"./utils/resolveSources","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":196},"end":{"line":7,"column":55,"index":251}}],"key":"DpM65pxwg+MyXfeuGazS5AMaNMU=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use client';\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.useImage = useImage;\n  var _babelRuntimeHelpersToConsumableArray = require(_dependencyMap[0], \"@babel/runtime/helpers/toConsumableArray\");\n  var _toConsumableArray = _interopDefault(_babelRuntimeHelpersToConsumableArray);\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[1], \"@babel/runtime/helpers/slicedToArray\");\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _react = require(_dependencyMap[2], \"react\");\n  var _Image = require(_dependencyMap[3], \"./Image\");\n  var _utilsResolveSources = require(_dependencyMap[4], \"./utils/resolveSources\");\n  /**\n   * A hook that loads an image from the given source and returns a reference\n   * to the native image instance, or `null` until the first image is successfully loaded.\n   *\n   * It loads a new image every time the `uri` of the provided source changes.\n   * To trigger reloads in some other scenarios, you can provide an additional dependency list.\n   * @platform android\n   * @platform ios\n   * @platform web\n   *\n   * @example\n   * ```ts\n   * import { useImage, Image } from 'expo-image';\n   * import { Text } from 'react-native';\n   *\n   * export default function MyImage() {\n   *   const image = useImage('https://picsum.photos/1000/800', {\n   *     maxWidth: 800,\n   *     onError(error, retry) {\n   *       console.error('Loading failed:', error.message);\n   *     }\n   *   });\n   *\n   *   if (!image) {\n   *     return <Text>Image is loading...</Text>;\n   *   }\n   *\n   *   return <Image source={image} style={{ width: image.width / 2, height: image.height / 2 }} />;\n   * }\n   * ```\n   */\n  function useImage(source) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var dependencies = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n    var resolvedSource = (0, _utilsResolveSources.resolveSource)(source);\n    var _useState = (0, _react.useState)(null),\n      _useState2 = (0, _slicedToArray.default)(_useState, 2),\n      image = _useState2[0],\n      setImage = _useState2[1];\n\n    // Since options are not dependencies of the below effect, we store them in a ref.\n    // Once the image is asynchronously loaded, the effect will use the most recent options,\n    // instead of the captured ones (especially important for callbacks that may change in subsequent renders).\n    var optionsRef = (0, _react.useRef)(options);\n    optionsRef.current = options;\n    (0, _react.useEffect)(function () {\n      // We're doing some asynchronous action in this effect, so we should keep track\n      // if the effect was already cleaned up. In that case, the async action shouldn't change the state.\n      var isEffectValid = true;\n      function loadImage() {\n        _Image.Image.loadAsync(resolvedSource, options).then(function (image) {\n          if (isEffectValid) {\n            setImage(image);\n          }\n        }).catch(function (error) {\n          if (!isEffectValid) {\n            return;\n          }\n          if (optionsRef.current.onError) {\n            optionsRef.current.onError(error, loadImage);\n          } else {\n            // Print unhandled errors to the console.\n            console.error(`Loading an image from '${resolvedSource.uri}' failed, use 'onError' option to handle errors and suppress this message`);\n            console.error(error);\n          }\n        });\n      }\n      loadImage();\n      return function () {\n        // Invalidate the effect and release the shared object to free up memory.\n        isEffectValid = false;\n        image == null || image.release();\n      };\n    }, [resolvedSource.uri].concat((0, _toConsumableArray.default)(dependencies)));\n    return image;\n  }\n});","lineCount":97,"map":[[2,2,1,0],[2,14,1,12],[3,2,1,13],[5,2,1,13,"Object"],[5,8,1,13],[5,9,1,13,"defineProperty"],[5,23,1,13],[5,24,1,13,"exports"],[5,31,1,13],[6,4,1,13,"value"],[6,9,1,13],[7,2,1,13],[8,2,1,13],[8,11,1,13,"_interopDefault"],[8,27,1,13,"e"],[8,28,1,13],[9,4,1,13],[9,11,1,13,"e"],[9,12,1,13],[9,16,1,13,"e"],[9,17,1,13],[9,18,1,13,"__esModule"],[9,28,1,13],[9,31,1,13,"e"],[9,32,1,13],[10,6,1,13,"default"],[10,13,1,13],[10,15,1,13,"e"],[11,4,1,13],[12,2,1,13],[13,2,40,0,"exports"],[13,9,40,0],[13,10,40,0,"useImage"],[13,18,40,0],[13,21,40,0,"useImage"],[13,29,40,0],[14,2,92,1],[14,6,92,1,"_babelRuntimeHelpersToConsumableArray"],[14,43,92,1],[14,46,92,1,"require"],[14,53,92,1],[14,54,92,1,"_dependencyMap"],[14,68,92,1],[15,2,92,1],[15,6,92,1,"_toConsumableArray"],[15,24,92,1],[15,27,92,1,"_interopDefault"],[15,42,92,1],[15,43,92,1,"_babelRuntimeHelpersToConsumableArray"],[15,80,92,1],[16,2,92,1],[16,6,92,1,"_babelRuntimeHelpersSlicedToArray"],[16,39,92,1],[16,42,92,1,"require"],[16,49,92,1],[16,50,92,1,"_dependencyMap"],[16,64,92,1],[17,2,92,1],[17,6,92,1,"_slicedToArray"],[17,20,92,1],[17,23,92,1,"_interopDefault"],[17,38,92,1],[17,39,92,1,"_babelRuntimeHelpersSlicedToArray"],[17,72,92,1],[18,2,3,0],[18,6,3,0,"_react"],[18,12,3,0],[18,15,3,0,"require"],[18,22,3,0],[18,23,3,0,"_dependencyMap"],[18,37,3,0],[19,2,5,0],[19,6,5,0,"_Image"],[19,12,5,0],[19,15,5,0,"require"],[19,22,5,0],[19,23,5,0,"_dependencyMap"],[19,37,5,0],[20,2,7,0],[20,6,7,0,"_utilsResolveSources"],[20,26,7,0],[20,29,7,0,"require"],[20,36,7,0],[20,37,7,0,"_dependencyMap"],[20,51,7,0],[21,2,9,0],[22,0,10,0],[23,0,11,0],[24,0,12,0],[25,0,13,0],[26,0,14,0],[27,0,15,0],[28,0,16,0],[29,0,17,0],[30,0,18,0],[31,0,19,0],[32,0,20,0],[33,0,21,0],[34,0,22,0],[35,0,23,0],[36,0,24,0],[37,0,25,0],[38,0,26,0],[39,0,27,0],[40,0,28,0],[41,0,29,0],[42,0,30,0],[43,0,31,0],[44,0,32,0],[45,0,33,0],[46,0,34,0],[47,0,35,0],[48,0,36,0],[49,0,37,0],[50,0,38,0],[51,0,39,0],[52,2,40,7],[52,11,40,16,"useImage"],[52,19,40,24,"useImage"],[52,20,41,2,"source"],[52,26,41,39],[52,28,44,19],[53,4,44,19],[53,8,42,2,"options"],[53,15,42,27],[53,18,42,27,"arguments"],[53,27,42,27],[53,28,42,27,"length"],[53,34,42,27],[53,42,42,27,"arguments"],[53,51,42,27],[53,59,42,27,"undefined"],[53,68,42,27],[53,71,42,27,"arguments"],[53,80,42,27],[53,86,42,30],[53,87,42,31],[53,88,42,32],[54,4,42,32],[54,8,43,2,"dependencies"],[54,20,43,30],[54,23,43,30,"arguments"],[54,32,43,30],[54,33,43,30,"length"],[54,39,43,30],[54,47,43,30,"arguments"],[54,56,43,30],[54,64,43,30,"undefined"],[54,73,43,30],[54,76,43,30,"arguments"],[54,85,43,30],[54,91,43,33],[54,93,43,35],[55,4,45,2],[55,8,45,8,"resolvedSource"],[55,22,45,22],[55,25,45,25],[55,29,45,25,"resolveSource"],[55,49,45,38],[55,50,45,38,"resolveSource"],[55,63,45,38],[55,65,45,39,"source"],[55,71,45,45],[55,72,45,61],[56,4,46,2],[56,8,46,2,"_useState"],[56,17,46,2],[56,20,46,28],[56,24,46,28,"useState"],[56,30,46,36],[56,31,46,36,"useState"],[56,39,46,36],[56,41,46,54],[56,45,46,58],[56,46,46,59],[57,6,46,59,"_useState2"],[57,16,46,59],[57,23,46,59,"_slicedToArray"],[57,37,46,59],[57,38,46,59,"default"],[57,45,46,59],[57,47,46,59,"_useState"],[57,56,46,59],[58,6,46,9,"image"],[58,11,46,14],[58,14,46,14,"_useState2"],[58,24,46,14],[59,6,46,16,"setImage"],[59,14,46,24],[59,17,46,24,"_useState2"],[59,27,46,24],[61,4,48,2],[62,4,49,2],[63,4,50,2],[64,4,51,2],[64,8,51,8,"optionsRef"],[64,18,51,18],[64,21,51,21],[64,25,51,21,"useRef"],[64,31,51,27],[64,32,51,27,"useRef"],[64,38,51,27],[64,40,51,46,"options"],[64,47,51,53],[64,48,51,54],[65,4,52,2,"optionsRef"],[65,14,52,12],[65,15,52,13,"current"],[65,22,52,20],[65,25,52,23,"options"],[65,32,52,30],[66,4,54,2],[66,8,54,2,"useEffect"],[66,14,54,11],[66,15,54,11,"useEffect"],[66,24,54,11],[66,26,54,12],[66,38,54,18],[67,6,55,4],[68,6,56,4],[69,6,57,4],[69,10,57,8,"isEffectValid"],[69,23,57,21],[69,26,57,24],[69,30,57,28],[70,6,59,4],[70,15,59,13,"loadImage"],[70,24,59,22,"loadImage"],[70,25,59,22],[70,27,59,25],[71,8,60,6,"Image"],[71,14,60,11],[71,15,60,11,"Image"],[71,20,60,11],[71,21,60,12,"loadAsync"],[71,30,60,21],[71,31,60,22,"resolvedSource"],[71,45,60,36],[71,47,60,38,"options"],[71,54,60,45],[71,55,60,46],[71,56,61,9,"then"],[71,60,61,13],[71,61,61,14],[71,71,61,15,"image"],[71,76,61,20],[71,78,61,25],[72,10,62,10],[72,14,62,14,"isEffectValid"],[72,27,62,27],[72,29,62,29],[73,12,63,12,"setImage"],[73,20,63,20],[73,21,63,21,"image"],[73,26,63,26],[73,27,63,27],[74,10,64,10],[75,8,65,8],[75,9,65,9],[75,10,65,10],[75,11,66,9,"catch"],[75,16,66,14],[75,17,66,15],[75,27,66,16,"error"],[75,32,66,21],[75,34,66,26],[76,10,67,10],[76,14,67,14],[76,15,67,15,"isEffectValid"],[76,28,67,28],[76,30,67,30],[77,12,68,12],[78,10,69,10],[79,10,70,10],[79,14,70,14,"optionsRef"],[79,24,70,24],[79,25,70,25,"current"],[79,32,70,32],[79,33,70,33,"onError"],[79,40,70,40],[79,42,70,42],[80,12,71,12,"optionsRef"],[80,22,71,22],[80,23,71,23,"current"],[80,30,71,30],[80,31,71,31,"onError"],[80,38,71,38],[80,39,71,39,"error"],[80,44,71,44],[80,46,71,46,"loadImage"],[80,55,71,55],[80,56,71,56],[81,10,72,10],[81,11,72,11],[81,17,72,17],[82,12,73,12],[83,12,74,12,"console"],[83,19,74,19],[83,20,74,20,"error"],[83,25,74,25],[83,26,75,14],[83,52,75,40,"resolvedSource"],[83,66,75,54],[83,67,75,55,"uri"],[83,70,75,58],[83,145,76,12],[83,146,76,13],[84,12,77,12,"console"],[84,19,77,19],[84,20,77,20,"error"],[84,25,77,25],[84,26,77,26,"error"],[84,31,77,31],[84,32,77,32],[85,10,78,10],[86,8,79,8],[86,9,79,9],[86,10,79,10],[87,6,80,4],[88,6,82,4,"loadImage"],[88,15,82,13],[88,16,82,14],[88,17,82,15],[89,6,84,4],[89,13,84,11],[89,25,84,17],[90,8,85,6],[91,8,86,6,"isEffectValid"],[91,21,86,19],[91,24,86,22],[91,29,86,27],[92,8,87,6,"image"],[92,13,87,11],[92,25,87,6,"image"],[92,30,87,11],[92,31,87,13,"release"],[92,38,87,20],[92,39,87,21],[92,40,87,22],[93,6,88,4],[93,7,88,5],[94,4,89,2],[94,5,89,3],[94,8,89,6,"resolvedSource"],[94,22,89,20],[94,23,89,21,"uri"],[94,26,89,24],[94,28,89,24,"concat"],[94,34,89,24],[94,39,89,24,"_toConsumableArray"],[94,57,89,24],[94,58,89,24,"default"],[94,65,89,24],[94,67,89,29,"dependencies"],[94,79,89,41],[94,81,89,42],[94,82,89,43],[95,4,91,2],[95,11,91,9,"image"],[95,16,91,14],[96,2,92,0],[97,0,92,1],[97,3]],"functionMap":{"names":["<global>","useImage","useEffect$argument_0","loadImage","Image.loadAsync.then$argument_0","Image.loadAsync.then._catch$argument_0","<anonymous>"],"mappings":"AAA;OCuC;YCc;ICK;cCE;SDI;eEC;SFa;KDC;WII;KJI;GDC;CDG"},"hasCjsExports":false},"type":"js/module"}]}