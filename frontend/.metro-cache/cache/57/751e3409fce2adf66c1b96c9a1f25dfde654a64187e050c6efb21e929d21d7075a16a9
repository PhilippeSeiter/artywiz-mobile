{"dependencies":[{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"],"imports":1}},{"name":"../services/authService","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":67},"end":{"line":3,"column":54,"index":121}}],"key":"eRnSkZK1DKe4zDf2LZM5EyIlz9k=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"useAuthStore\", {\n    enumerable: true,\n    get: function () {\n      return useAuthStore;\n    }\n  });\n  var _zustand = require(_dependencyMap[0], \"zustand\");\n  var _servicesAuthService = require(_dependencyMap[1], \"../services/authService\");\n  const useAuthStore = (0, _zustand.create)((set, get) => ({\n    user: null,\n    isLoading: false,\n    isInitialized: false,\n    isLoggingOut: false,\n    setUser: user => set({\n      user\n    }),\n    login: async (email, password, profileId) => {\n      set({\n        isLoading: true\n      });\n      try {\n        const user = await _servicesAuthService.AuthService.login(email, password, profileId);\n        set({\n          user,\n          isLoading: false\n        });\n      } catch (error) {\n        set({\n          isLoading: false\n        });\n        throw error;\n      }\n    },\n    signup: async (email, password, name, profileId) => {\n      set({\n        isLoading: true\n      });\n      try {\n        const user = await _servicesAuthService.AuthService.signup(email, password, name, profileId);\n        set({\n          user,\n          isLoading: false\n        });\n      } catch (error) {\n        set({\n          isLoading: false\n        });\n        throw error;\n      }\n    },\n    logout: async () => {\n      // Prevent double logout\n      if (get().isLoggingOut) return false;\n      set({\n        isLoggingOut: true\n      });\n      try {\n        // Clear user state FIRST\n        set({\n          user: null\n        });\n        // Then clear storage\n        await _servicesAuthService.AuthService.logout();\n        set({\n          isLoggingOut: false\n        });\n        return true;\n      } catch (error) {\n        console.error('Logout error:', error);\n        set({\n          isLoggingOut: false\n        });\n        return false;\n      }\n    },\n    initialize: async () => {\n      try {\n        const user = await _servicesAuthService.AuthService.getCurrentUser();\n        set({\n          user,\n          isInitialized: true\n        });\n      } catch (error) {\n        console.error('Initialize error:', error);\n        set({\n          user: null,\n          isInitialized: true\n        });\n      }\n    },\n    updateProfile: async profileId => {\n      await _servicesAuthService.AuthService.updateProfile(profileId);\n      const user = await _servicesAuthService.AuthService.getCurrentUser();\n      set({\n        user\n      });\n    }\n  }));\n});","lineCount":105,"map":[[7,2,18,0,"Object"],[7,8,18,0],[7,9,18,0,"defineProperty"],[7,23,18,0],[7,24,18,0,"exports"],[7,31,18,0],[8,4,18,0,"enumerable"],[8,14,18,0],[9,4,18,0,"get"],[9,7,18,0],[9,18,18,0,"get"],[9,19,18,0],[10,6,18,0],[10,13,18,0,"useAuthStore"],[10,25,18,0],[11,4,18,0],[12,2,18,0],[13,2,1,0],[13,6,1,0,"_zustand"],[13,14,1,0],[13,17,1,0,"require"],[13,24,1,0],[13,25,1,0,"_dependencyMap"],[13,39,1,0],[14,2,3,0],[14,6,3,0,"_servicesAuthService"],[14,26,3,0],[14,29,3,0,"require"],[14,36,3,0],[14,37,3,0,"_dependencyMap"],[14,51,3,0],[15,2,18,7],[15,8,18,13,"useAuthStore"],[15,20,18,25],[15,23,18,28],[15,27,18,28,"create"],[15,35,18,34],[15,36,18,34,"create"],[15,42,18,34],[15,44,18,46],[15,45,18,47,"set"],[15,48,18,50],[15,50,18,52,"get"],[15,53,18,55],[15,59,18,61],[16,4,19,2,"user"],[16,8,19,6],[16,10,19,8],[16,14,19,12],[17,4,20,2,"isLoading"],[17,13,20,11],[17,15,20,13],[17,20,20,18],[18,4,21,2,"isInitialized"],[18,17,21,15],[18,19,21,17],[18,24,21,22],[19,4,22,2,"isLoggingOut"],[19,16,22,14],[19,18,22,16],[19,23,22,21],[20,4,24,2,"setUser"],[20,11,24,9],[20,13,24,12,"user"],[20,17,24,16],[20,21,24,21,"set"],[20,24,24,24],[20,25,24,25],[21,6,24,27,"user"],[22,4,24,32],[22,5,24,33],[22,6,24,34],[23,4,26,2,"login"],[23,9,26,7],[23,11,26,9],[23,17,26,9,"login"],[23,18,26,16,"email"],[23,23,26,21],[23,25,26,23,"password"],[23,33,26,31],[23,35,26,33,"profileId"],[23,44,26,42],[23,49,26,47],[24,6,27,4,"set"],[24,9,27,7],[24,10,27,8],[25,8,27,10,"isLoading"],[25,17,27,19],[25,19,27,21],[26,6,27,26],[26,7,27,27],[26,8,27,28],[27,6,28,4],[27,10,28,8],[28,8,29,6],[28,14,29,12,"user"],[28,18,29,16],[28,21,29,19],[28,27,29,25,"AuthService"],[28,47,29,36],[28,48,29,36,"AuthService"],[28,59,29,36],[28,60,29,37,"login"],[28,65,29,42],[28,66,29,43,"email"],[28,71,29,48],[28,73,29,50,"password"],[28,81,29,58],[28,83,29,60,"profileId"],[28,92,29,69],[28,93,29,70],[29,8,30,6,"set"],[29,11,30,9],[29,12,30,10],[30,10,30,12,"user"],[30,14,30,16],[31,10,30,18,"isLoading"],[31,19,30,27],[31,21,30,29],[32,8,30,35],[32,9,30,36],[32,10,30,37],[33,6,31,4],[33,7,31,5],[33,8,31,6],[33,15,31,13,"error"],[33,20,31,18],[33,22,31,20],[34,8,32,6,"set"],[34,11,32,9],[34,12,32,10],[35,10,32,12,"isLoading"],[35,19,32,21],[35,21,32,23],[36,8,32,29],[36,9,32,30],[36,10,32,31],[37,8,33,6],[37,14,33,12,"error"],[37,19,33,17],[38,6,34,4],[39,4,35,2],[39,5,35,3],[40,4,37,2,"signup"],[40,10,37,8],[40,12,37,10],[40,18,37,10,"signup"],[40,19,37,17,"email"],[40,24,37,22],[40,26,37,24,"password"],[40,34,37,32],[40,36,37,34,"name"],[40,40,37,38],[40,42,37,40,"profileId"],[40,51,37,49],[40,56,37,54],[41,6,38,4,"set"],[41,9,38,7],[41,10,38,8],[42,8,38,10,"isLoading"],[42,17,38,19],[42,19,38,21],[43,6,38,26],[43,7,38,27],[43,8,38,28],[44,6,39,4],[44,10,39,8],[45,8,40,6],[45,14,40,12,"user"],[45,18,40,16],[45,21,40,19],[45,27,40,25,"AuthService"],[45,47,40,36],[45,48,40,36,"AuthService"],[45,59,40,36],[45,60,40,37,"signup"],[45,66,40,43],[45,67,40,44,"email"],[45,72,40,49],[45,74,40,51,"password"],[45,82,40,59],[45,84,40,61,"name"],[45,88,40,65],[45,90,40,67,"profileId"],[45,99,40,76],[45,100,40,77],[46,8,41,6,"set"],[46,11,41,9],[46,12,41,10],[47,10,41,12,"user"],[47,14,41,16],[48,10,41,18,"isLoading"],[48,19,41,27],[48,21,41,29],[49,8,41,35],[49,9,41,36],[49,10,41,37],[50,6,42,4],[50,7,42,5],[50,8,42,6],[50,15,42,13,"error"],[50,20,42,18],[50,22,42,20],[51,8,43,6,"set"],[51,11,43,9],[51,12,43,10],[52,10,43,12,"isLoading"],[52,19,43,21],[52,21,43,23],[53,8,43,29],[53,9,43,30],[53,10,43,31],[54,8,44,6],[54,14,44,12,"error"],[54,19,44,17],[55,6,45,4],[56,4,46,2],[56,5,46,3],[57,4,48,2,"logout"],[57,10,48,8],[57,12,48,10],[57,18,48,10,"logout"],[57,19,48,10],[57,24,48,22],[58,6,49,4],[59,6,50,4],[59,10,50,8,"get"],[59,13,50,11],[59,14,50,12],[59,15,50,13],[59,16,50,14,"isLoggingOut"],[59,28,50,26],[59,30,50,28],[59,37,50,35],[59,42,50,40],[60,6,52,4,"set"],[60,9,52,7],[60,10,52,8],[61,8,52,10,"isLoggingOut"],[61,20,52,22],[61,22,52,24],[62,6,52,29],[62,7,52,30],[62,8,52,31],[63,6,53,4],[63,10,53,8],[64,8,54,6],[65,8,55,6,"set"],[65,11,55,9],[65,12,55,10],[66,10,55,12,"user"],[66,14,55,16],[66,16,55,18],[67,8,55,23],[67,9,55,24],[67,10,55,25],[68,8,56,6],[69,8,57,6],[69,14,57,12,"AuthService"],[69,34,57,23],[69,35,57,23,"AuthService"],[69,46,57,23],[69,47,57,24,"logout"],[69,53,57,30],[69,54,57,31],[69,55,57,32],[70,8,58,6,"set"],[70,11,58,9],[70,12,58,10],[71,10,58,12,"isLoggingOut"],[71,22,58,24],[71,24,58,26],[72,8,58,32],[72,9,58,33],[72,10,58,34],[73,8,59,6],[73,15,59,13],[73,19,59,17],[74,6,60,4],[74,7,60,5],[74,8,60,6],[74,15,60,13,"error"],[74,20,60,18],[74,22,60,20],[75,8,61,6,"console"],[75,15,61,13],[75,16,61,14,"error"],[75,21,61,19],[75,22,61,20],[75,37,61,35],[75,39,61,37,"error"],[75,44,61,42],[75,45,61,43],[76,8,62,6,"set"],[76,11,62,9],[76,12,62,10],[77,10,62,12,"isLoggingOut"],[77,22,62,24],[77,24,62,26],[78,8,62,32],[78,9,62,33],[78,10,62,34],[79,8,63,6],[79,15,63,13],[79,20,63,18],[80,6,64,4],[81,4,65,2],[81,5,65,3],[82,4,67,2,"initialize"],[82,14,67,12],[82,16,67,14],[82,22,67,14,"initialize"],[82,23,67,14],[82,28,67,26],[83,6,68,4],[83,10,68,8],[84,8,69,6],[84,14,69,12,"user"],[84,18,69,16],[84,21,69,19],[84,27,69,25,"AuthService"],[84,47,69,36],[84,48,69,36,"AuthService"],[84,59,69,36],[84,60,69,37,"getCurrentUser"],[84,74,69,51],[84,75,69,52],[84,76,69,53],[85,8,70,6,"set"],[85,11,70,9],[85,12,70,10],[86,10,70,12,"user"],[86,14,70,16],[87,10,70,18,"isInitialized"],[87,23,70,31],[87,25,70,33],[88,8,70,38],[88,9,70,39],[88,10,70,40],[89,6,71,4],[89,7,71,5],[89,8,71,6],[89,15,71,13,"error"],[89,20,71,18],[89,22,71,20],[90,8,72,6,"console"],[90,15,72,13],[90,16,72,14,"error"],[90,21,72,19],[90,22,72,20],[90,41,72,39],[90,43,72,41,"error"],[90,48,72,46],[90,49,72,47],[91,8,73,6,"set"],[91,11,73,9],[91,12,73,10],[92,10,73,12,"user"],[92,14,73,16],[92,16,73,18],[92,20,73,22],[93,10,73,24,"isInitialized"],[93,23,73,37],[93,25,73,39],[94,8,73,44],[94,9,73,45],[94,10,73,46],[95,6,74,4],[96,4,75,2],[96,5,75,3],[97,4,77,2,"updateProfile"],[97,17,77,15],[97,19,77,17],[97,25,77,24,"profileId"],[97,34,77,33],[97,38,77,38],[98,6,78,4],[98,12,78,10,"AuthService"],[98,32,78,21],[98,33,78,21,"AuthService"],[98,44,78,21],[98,45,78,22,"updateProfile"],[98,58,78,35],[98,59,78,36,"profileId"],[98,68,78,45],[98,69,78,46],[99,6,79,4],[99,12,79,10,"user"],[99,16,79,14],[99,19,79,17],[99,25,79,23,"AuthService"],[99,45,79,34],[99,46,79,34,"AuthService"],[99,57,79,34],[99,58,79,35,"getCurrentUser"],[99,72,79,49],[99,73,79,50],[99,74,79,51],[100,6,80,4,"set"],[100,9,80,7],[100,10,80,8],[101,8,80,10,"user"],[102,6,80,15],[102,7,80,16],[102,8,80,17],[103,4,81,2],[104,2,82,0],[104,3,82,1],[104,4,82,2],[104,5,82,3],[105,0,82,4],[105,3]],"functionMap":{"names":["<global>","create$argument_0","setUser","login","signup","logout","initialize","updateProfile"],"mappings":"AAA;8CCiB;WCM,uBD;SEE;GFS;UGE;GHS;UIE;GJiB;cKE;GLQ;iBME;GNI;EDC"},"hasCjsExports":false},"type":"js/module"}]}